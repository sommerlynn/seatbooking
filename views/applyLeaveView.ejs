<% include header.html %>
<style>
</style>
<div class="page">
    <header class="bar bar-nav">
        <h1 class='title'>请假申请</h1>
    </header>
    <nav class="bar bar-tab">
        <a class="tab-item" id="buildingTab" href="http://www.julyangel.cn/building2" external>
            <span class="icon icon-building"></span>
            <span class="tab-label">预约座位</span>
        </a>
        <a class="tab-item" id="skyTab" href="http://www.julyangel.cn/index" external>
            <span class="icon icon-star"></span>
            <span class="tab-label">七玥星空</span>
        </a>
        <a class="tab-item active" id="meTab" href="http://www.julyangel.cn/me2" external>
            <span class="icon icon-me"></span>
            <span class="tab-label">我的</span>
        </a>
    </nav>

    <div class="content">
        <div class="list-block">
            <ul>
                <!-- Text inputs -->
                <li>
                    <div class="item-content">
                        <div class="item-media"><i class="icon icon-form-name"></i></div>
                        <div class="item-inner">
                            <div class="item-title label">请假事由</div>
                            <div class="item-input">
                                <textarea placeholder="请假事由" id="application-reason-input"></textarea>
                            </div>
                        </div>
                    </div>
                </li>

                <li>
                    <div class="item-content">
                        <div class="item-media"><i class="icon icon-form-name"></i></div>
                        <div class="item-inner">
                            <div class="item-title label">起始时间</div>
                            <div class="item-input">
                                <input type="text" placeholder="起始时间" id="start-time-picker">
                            </div>
                        </div>
                    </div>
                </li>

                <li>
                    <div class="item-content">
                        <div class="item-media"><i class="icon icon-form-name"></i></div>
                        <div class="item-inner">
                            <div class="item-title label">结束时间</div>
                            <div class="item-input">
                                <input type="text" placeholder="结束时间" id="end-time-picker">
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
            <div class="content-block">
                <div class="row">
                    <div class="col-50"><a href="me" class="button button-big button-fill button-danger">取消</a></div>
                    <div class="col-50"><a href="#" class="button button-big button-fill button-success" id="submit-btn">提交</a></div>
                </div>
            </div>
        </div>
    </div>

    <script type='text/javascript' src='//g.alicdn.com/sj/lib/zepto/zepto.min.js' charset='utf-8'></script>
    <script type='text/javascript' src='//g.alicdn.com/msui/sm/0.6.2/js/sm.min.js' charset='utf-8'></script>
    <script type='text/javascript' src='//g.alicdn.com/msui/sm/0.6.2/js/sm-extend.min.js' charset='utf-8'></script>
    <script>
        $.config = {
            autoInit: true,
            router: false
        }

        $("#start-time-picker").datetimePicker({
            toolbarTemplate: '<header class="bar bar-nav">\
                              <button class="button button-link pull-right close-picker">确定</button>\
                              <h1 class="title">选择请假的起始时间</h1>\
                              </header>'
        });

        $("#end-time-picker").datetimePicker({
            toolbarTemplate: '<header class="bar bar-nav">\
                              <button class="button button-link pull-right close-picker">确定</button>\
                              <h1 class="title">选择请假的截止时间</h1>\
                              </header>'
        });

        $(document).on('click', '#submit-btn', function () {
            $.showPreloader('亲,我们正在提交请求,请稍候...');
            $.post('/applyLeave',
                    {
                        leaveReason:$('#application-reason-input')[0].value,
                        startTime:$('#start-time-picker')[0].value,
                        endTime:$('#end-time-picker')[0].value
                    },
                    function (response) {
                        $.hidePreloader();
                        $.alert(response);
                    });
        });
    </script>
</div>
<% include footer.html %>